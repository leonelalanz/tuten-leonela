{"ast":null,"code":"var _jsxFileName = \"/home/leonela/tuten-leonela/src/components/myLogin.js\";\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { connect } from \"react-redux\";\nimport saveUserAuth from '../redux/actions/saveUserAuth';\nimport clearUserAuth from \"../redux/actions/clearUserAuth\";\nimport pdf from '../pdf/Problema3-accesologin.pdf';\n\nclass login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      this.setState({\n        hasError: false,\n        errorMsg: \"\"\n      });\n\n      try {\n        const response = await Axios.put('https://dev.tuten.cl:443/TutenREST/rest/user/' + this.state.email, {}, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"app\": this.state.app,\n            \"password\": this.state.password\n          }\n        });\n        console.log(response);\n\n        if (response.data) {\n          const userAuthenticated = response.data;\n          const token = response.data.sessionTokenBck;\n          this.props.saveUserAuth(token, userAuthenticated);\n          this.props.history.push('/');\n        } else {\n          this.props.clearUserAuth();\n          this.setState({\n            hasError: true,\n            errorMsg: response.data.message\n          });\n        }\n      } catch (error) {\n        this.setState({\n          hasError: true,\n          errorMsg: \"Email, password o app incorrecto\"\n        });\n      }\n    };\n\n    this.state = {\n      email: \"\",\n      app: \"\",\n      password: \"\",\n      hasError: false,\n      errorMsg: \"\"\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6 offset-s3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }\n    }, \"PROBLEMA 3 : ACCESO LOGIN\"), /*#__PURE__*/React.createElement(\"a\", {\n      href: pdf,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }\n    }, \"Enunciado\"), this.state.hasError && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-panel red darken-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, this.state.errorMsg), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"email\",\n      id: \"email\",\n      type: \"text\",\n      className: \"validate\",\n      value: this.state.email,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email\",\n      className: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 41\n      }\n    }, \"Email\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"app\",\n      id: \"app\",\n      type: \"text\",\n      className: \"validate\",\n      value: this.state.app,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"app\",\n      className: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 41\n      }\n    }, \"App\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.password,\n      name: \"password\",\n      id: \"password\",\n      type: \"password\",\n      className: \"validate\",\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password\",\n      className: \"active\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 41\n      }\n    }, \"Password\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col s6 left-align\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"waves-effect waves-light btn\",\n      onClick: this.onSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 42\n      }\n    }, \" Iniciar\"))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userAuthenticated: state.userAuthenticated\n  };\n};\n\nconst mapDispatchToProps = {\n  saveUserAuth,\n  clearUserAuth\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(login);","map":{"version":3,"sources":["/home/leonela/tuten-leonela/src/components/myLogin.js"],"names":["React","Component","Axios","connect","saveUserAuth","clearUserAuth","pdf","login","constructor","props","onChange","e","setState","target","name","value","onSubmit","preventDefault","hasError","errorMsg","response","put","state","email","headers","app","password","console","log","data","userAuthenticated","token","sessionTokenBck","history","push","message","error","render","bind","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Axios from 'axios';\nimport { connect } from \"react-redux\";\nimport saveUserAuth from '../redux/actions/saveUserAuth'\nimport clearUserAuth from \"../redux/actions/clearUserAuth\";\nimport pdf from '../pdf/Problema3-accesologin.pdf'\n\nclass login extends Component {\n    constructor(props){\n        super(props);\n        this.state={\n            email:\"\",\n            app:\"\",\n            password:\"\",\n            hasError:false,\n            errorMsg:\"\"\n        }\n    };\n\n    onChange = e => {\n        this.setState({\n            [e.target.name]: e.target.value\n        });\n    };\n\n     onSubmit = async  (e) => {\n        e.preventDefault();\n        this.setState({\n             hasError: false,\n             errorMsg: \"\"\n        })\n        try {\n            const response = await Axios.put('https://dev.tuten.cl:443/TutenREST/rest/user/'+this.state.email, {}, {\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\",\n                    \"app\": this.state.app,\n                    \"password\": this.state.password\n\n                }\n            });\n            console.log(response);\n            if (response.data) {\n                const userAuthenticated = response.data;\n                const token = response.data.sessionTokenBck;\n                this.props.saveUserAuth(token, userAuthenticated);\n                this.props.history.push('/');\n            } else {\n                this.props.clearUserAuth();\n                this.setState({\n                    hasError:true,\n                    errorMsg: response.data.message\n                })\n            }            \n        } catch (error) {\n            this.setState({\n                hasError:true,\n                errorMsg:\"Email, password o app incorrecto\"\n            })\n        }\n    };\n    render() {\n        return (\n            <div className=\"row container\">\n                < div className = \"col s6 offset-s3\" >\n                    <h4 className=\"\">PROBLEMA 3 : ACCESO LOGIN</h4>\n                    <a href={pdf}>Enunciado</a>\n                    {this.state.hasError&&\n                    <div className=\"card-panel red darken-1\">{this.state.errorMsg}</div>}\n                    <div className=\"card \">\n                        <div className=\"card-content\">\n                            <form>\n                                <div className=\"row\">\n                                    <div className=\"input-field col s12\">\n                                        <input\n                                        name = \"email\"\n                                        id = \"email\"\n                                        type = \"text\"\n                                        className=\"validate\" value={this.state.email}\n                                        onChange={this.onChange}/>\n                                        <label htmlFor=\"email\" className=\"active\">Email</label>\n                                    </div>                    \n                                </div>\n                                <div className=\"row\">\n                                    <div className=\"input-field col s12\">\n                                        <input\n                                        name = \"app\"\n                                        id = \"app\"\n                                        type = \"text\"\n                                        className=\"validate\" value={this.state.app}\n                                        onChange={this.onChange}/>\n                                        <label htmlFor=\"app\" className=\"active\">App</label>\n                                    </div>                    \n                                </div>\n                                <div className=\"row\">\n                                    <div className=\"input-field col s12\">\n                                        < input value = {this.state.password}\n                                        name = \"password\"\n                                        id = \"password\"\n                                        type = \"password\"\n                                        className=\"validate\" onChange={this.onChange}/>\n                                        <label htmlFor=\"password\" className=\"active\">Password</label>\n                                    </div>\n                                </div>\n                                <div className = \"row \" >\n                                    < div className = \"col s6 left-align\" >\n                                        {<button type=\"submit\" className = \"waves-effect waves-light btn\" \n                                            onClick={this.onSubmit.bind(this)}> Iniciar</button>}\n                                    </div>\n                                </div>\n                            </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n        )\n    }\n}\nconst mapStateToProps = (state) => {\n    return {\n        userAuthenticated: state.userAuthenticated\n    }\n}\n\nconst mapDispatchToProps = {\n        saveUserAuth,\n        clearUserAuth\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(login)"]},"metadata":{},"sourceType":"module"}