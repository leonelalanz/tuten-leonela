{"ast":null,"code":"var _jsxFileName = \"/home/leonela/leonelalanz-tuten/src/components/list.js\";\nimport React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport Axios from 'axios';\nimport * as moment from 'moment';\nimport * as numeral from 'numeral';\nimport M from 'materialize-css';\nimport pdf from '../pdf/Problema3-listadodedatos.pdf';\nconst operationValues = [\">=\", \"<=\"];\n\nclass list extends Component {\n  constructor() {\n    super();\n\n    this.getBookings = async () => {\n      try {\n        const token = this.props.userAuthenticated.token;\n        const response = await Axios.get('https://dev.tuten.cl/TutenREST/rest/user/contacto@tuten.cl/bookings?current=true', {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Accept\": \"application/json\",\n            \"adminemail\": \"testapis@tuten.cl\",\n            \"token\": token,\n            \"app\": \"APP_BCK\"\n          }\n        });\n\n        if (response.data && response.data.length > 0) {\n          this.setState({\n            bookings: response.data\n          });\n        } else {\n          this.setState({\n            notFound: true\n          });\n        }\n      } catch (error) {\n        this.setState({\n          notFound: true\n        });\n      }\n    };\n\n    this.onChange = e => {\n      const filtro = this.state.filtro;\n      filtro[e.target.name] = e.target.value;\n      this.setState({\n        filtro\n      });\n    };\n\n    this.onSubmit = async e => {\n      e.preventDefault();\n      await this.getBookings();\n      const _this$state = this.state,\n            bookings = _this$state.bookings,\n            filtro = _this$state.filtro;\n      const result = bookings.filter(obj => {\n        if (filtro.bookingId) {\n          if (filtro.compBookingId === \">=\") {\n            if (obj.bookingId < filtro.bookingId) {\n              return false;\n            }\n          } else {\n            if (obj.bookingId > filtro.bookingId) {\n              return false;\n            }\n          }\n        }\n\n        if (filtro.bookingPrice) {\n          if (filtro.compBookingPrice === \">=\") {\n            if (obj.bookingPrice < filtro.bookingPrice) {\n              return false;\n            }\n          } else {\n            if (obj.bookingPrice > filtro.bookingPrice) {\n              return false;\n            }\n          }\n        }\n\n        return true;\n      });\n      this.setState({\n        bookings: result\n      });\n    };\n\n    this.resetForm = () => {\n      this.setState({\n        filtro: {\n          bookingId: \"\",\n          compBookingId: \">=\",\n          bookingPrice: \"\",\n          compBookingPrice: \">=\"\n        }\n      });\n      this.getBookings();\n    };\n\n    this.changeShowFiltro = () => {\n      this.setState(state => {\n        return {\n          showFiltro: !state.showFiltro\n        };\n      });\n    };\n\n    this.state = {\n      bookings: [],\n      notFound: false,\n      showFiltro: true,\n      filtro: {\n        bookingId: \"\",\n        compBookingId: \">=\",\n        bookingPrice: \"\",\n        compBookingPrice: \">=\"\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getBookings();\n    var elems = document.querySelectorAll('select');\n    M.FormSelect.init(elems, {});\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"card\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"dataTable_filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      onClick: this.changeShowFiltro,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.state.showFiltro ? \"Ocultar\" : \"Mostrar\", \" Filtro \"))), this.state.showFiltro && React.createElement(\"form\", {\n      action: \"\",\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field col s4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"compBookingId\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, operationValues.map((obj, index) => React.createElement(\"option\", {\n      key: index,\n      value: obj,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, obj))), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Comparator\")), React.createElement(\"div\", {\n      className: \"input-field col s8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"bookingId\",\n      id: \"bookingId\",\n      type: \"number\",\n      min: \"0\",\n      className: \"validate\",\n      value: this.state.filtro.bookingId,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"bookingId\",\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"bookingId\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field col s4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"compBookingPrice\",\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, operationValues.map((obj, index) => React.createElement(\"option\", {\n      key: index,\n      value: obj,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, obj))), React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, \"Comparator\")), React.createElement(\"div\", {\n      className: \"input-field col s8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"bookingPrice\",\n      id: \"bookingPrice\",\n      type: \"number\",\n      min: \"0\",\n      className: \"validate\",\n      value: this.state.filtro.bookingPrice,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      htmlFor: \"bookingPrice\",\n      className: \"active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"bookingPrice\")))), React.createElement(\"div\", {\n      className: \"col s2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"waves-light btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, \" Filtrar\"))), React.createElement(\"div\", {\n      className: \"row \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn waves-light\",\n      onClick: this.resetForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, \"Limpiar\"))))))), !this.state.notFound ? React.createElement(\"table\", {\n      className: \"responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      role: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, \"BookingId\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, \"Cliente\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Fecha de Creaci\\xF3n\"), React.createElement(\"th\", {\n      width: \"40%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, \"Direcci\\xF3n\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Precio\")), React.createElement(\"a\", {\n      href: pdf,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, \"Enunciado\")), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, this.state.bookings.map((obj, i) => React.createElement(\"tr\", {\n      key: obj.bookingId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }, obj.bookingId), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, obj.tutenUserClient.firstName + \" \" + obj.tutenUserClient.lastName), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, moment(obj.bookingTime).format(\"DD-MM-YYYY\")), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, obj.locationId.streetAddress), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, numeral(obj.bookingPrice).format('$0,0.00')))))) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, \"No Encontrado\")));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userAuthenticated: state.userAuthenticated\n  };\n};\n\nexport default connect(mapStateToProps)(list);","map":{"version":3,"sources":["/home/leonela/leonelalanz-tuten/src/components/list.js"],"names":["React","Component","connect","Axios","moment","numeral","M","pdf","operationValues","list","constructor","getBookings","token","props","userAuthenticated","response","get","headers","data","length","setState","bookings","notFound","error","onChange","e","filtro","state","target","name","value","onSubmit","preventDefault","result","filter","obj","bookingId","compBookingId","bookingPrice","compBookingPrice","resetForm","changeShowFiltro","showFiltro","componentDidMount","elems","document","querySelectorAll","FormSelect","init","render","map","index","i","tutenUserClient","firstName","lastName","bookingTime","format","locationId","streetAddress","mapStateToProps"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react'\nimport { connect } from \"react-redux\";\nimport Axios from 'axios';\nimport * as moment from 'moment';\nimport * as numeral from 'numeral';\nimport M from 'materialize-css';\nimport pdf from '../pdf/Problema3-listadodedatos.pdf'\n\nconst operationValues = [\">=\",\"<=\"];\nclass list extends Component {\n    constructor(){\n        super()\n        this.state={\n            bookings:[],\n            notFound:false,\n            showFiltro:true,\n            filtro:{\n                bookingId:\"\",\n                compBookingId: \">=\",\n                bookingPrice:\"\",\n                compBookingPrice: \">=\"\n            }\n        }\n    }\n\n    componentDidMount(){\n        this.getBookings();\n        var elems = document.querySelectorAll('select');\n        M.FormSelect.init(elems, {});\n    }\n\n    getBookings= async ()=>{\n        try {\n            const {token} = this.props.userAuthenticated;\n            const response = await Axios.get('https://dev.tuten.cl/TutenREST/rest/user/contacto@tuten.cl/bookings?current=true',{\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Accept\": \"application/json\",\n                    \"adminemail\": \"testapis@tuten.cl\",\n                    \"token\": token,\n                    \"app\": \"APP_BCK\"\n\n                }\n            }); \n            if (response.data && response.data.length>0) {\n                this.setState({\n                    bookings: response.data\n                })                \n            }else{\n                this.setState({\n                    notFound: true\n                })\n            }           \n        } catch (error) {\n            this.setState({\n                notFound:true\n            })\n        }\n\n    }\n    onChange = e => {\n        const {filtro} = this.state;\n        filtro[e.target.name] = e.target.value;\n        this.setState({\n            filtro\n        });\n    }\n\n    onSubmit=async (e)=>{\n        e.preventDefault();\n        await this.getBookings();\n        const {bookings, filtro}=this.state\n        const result = bookings.filter((obj) => {\n            if (filtro.bookingId) {\n                if (filtro.compBookingId===\">=\") {\n                    if (obj.bookingId < filtro.bookingId) {\n                        return false\n                    }                    \n                } else {\n                    if (obj.bookingId > filtro.bookingId) {\n                        return false\n                    }\n                }                \n            }\n            if (filtro.bookingPrice) {\n                if (filtro.compBookingPrice === \">=\") {\n                    if (obj.bookingPrice < filtro.bookingPrice) {\n                        return false\n                    }\n                } else {\n                    if (obj.bookingPrice > filtro.bookingPrice) {\n                        return false\n                    }\n                }\n            }\n            return true;\n        })\n        this.setState({\n            bookings:result\n        })\n    }\n    resetForm =() =>{\n        this.setState({\n            filtro: {\n                bookingId: \"\",\n                compBookingId: \">=\",\n                bookingPrice: \"\",\n                compBookingPrice: \">=\"\n            }\n        });\n        this.getBookings();\n    }\n    changeShowFiltro=()=>{\n        this.setState((state) => {\n            return {\n                showFiltro: !state.showFiltro\n            }\n        })\n    }\n\n    render() {\n        return (\n                <div className=\"card\">\n                    <div className=\"card-content\">\n                        <div className=\"dataTable_filter\">\n                            <div className=\"row\">\n                                <div className=\"col s12\">\n                                    <a onClick = {this.changeShowFiltro}>{this.state.showFiltro?\"Ocultar\":\"Mostrar\"} Filtro </a>\n                                </div>\n                            </div>\n                            {this.state.showFiltro&&\n                            <form action=\"\" onSubmit={this.onSubmit}>\n                                <div className=\"row\">\n                                    <div className=\"col s10\">\n                                        <div className=\"row\">\n                                            <div className=\"input-field col s4\">\n                                                < select name = \"compBookingId\"\n                                                    onChange={this.onChange}>\n                                                    {operationValues.map((obj,index) =>                                                     \n                                                            <option key ={index} value = {obj}>\n                                                                {obj}</option>\n                                                        \n                                                        )}\n                                                </select>\n                                                <label>Comparator</label>\n                                        </div>\n                                            <div className=\"input-field col s8\">\n                                                <input\n                                                name = \"bookingId\"\n                                                id = \"bookingId\"\n                                                type = \"number\"\n                                                min=\"0\"\n                                                className=\"validate\"\n                                                value={this.state.filtro.bookingId}\n                                                onChange={this.onChange}/>\n                                                <label htmlFor=\"bookingId\" className=\"active\">bookingId</label>\n                                            </div> \n                                        </div>\n                                        <div className=\"row\">                                            \n                                            <div className=\"input-field col s4\">\n                                                <select name=\"compBookingPrice\" \n                                                    onChange={this.onChange}>\n                                                    {operationValues.map((obj,index) =>                                                     \n                                                            <option key ={index} value = {obj}>\n                                                                {obj}</option>\n                                                        \n                                                        )}\n                                                </select>\n                                                <label>Comparator</label>\n                                        </div>\n                                        <div className=\"input-field col s8\">\n                                            <input\n                                                name = \"bookingPrice\"\n                                                id = \"bookingPrice\"\n                                                type = \"number\"\n                                                min=\"0\"\n                                                className=\"validate\" value={this.state.filtro.bookingPrice}\n                                                onChange={this.onChange}/>\n                                                <label htmlFor=\"bookingPrice\" className=\"active\">bookingPrice</label>\n                                        </div>  \n                                                       \n                                </div>\n                                    </div>\n                                    <div className=\"col s2\">                                        \n                                        <div className = \"row \" >\n                                            < div className = \"col s12\" >\n                                                <button type=\"submit\" className = \"waves-light btn\"> Filtrar</button>\n                                            </div>\n                                        </div>\n                                         <div className = \"row \" >\n                                            < div className = \"col s12\" >\n                                                <button className = \"btn waves-light\" onClick={this.resetForm}>Limpiar</button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </form> }          \n                       </div>\n                    {!this.state.notFound?\n                       <table className=\"responsive\">\n                            <thead>\n                            <tr role=\"row\">\n                                <th>BookingId</th>\n                                <th>Cliente</th>\n                                <th>Fecha de Creación</th>              \n                                <th width=\"40%\">Dirección</th>              \n                                <th>Precio</th>              \n                            </tr>\n                            <a href={pdf}>Enunciado</a>\n                            </thead>\n                            <tbody>\n                                {\n                                    this.state.bookings.map((obj, i) =>  <tr key={obj.bookingId}>\n                                            <td>{obj.bookingId}</td>\n                                            <td>{obj.tutenUserClient.firstName+\" \"+obj.tutenUserClient.lastName}</td>\n                                            <td>{moment(obj.bookingTime).format(\"DD-MM-YYYY\")}</td>\n                                            <td>{obj.locationId.streetAddress}</td>\n                                            <td>{numeral(obj.bookingPrice).format('$0,0.00')}</td>                                            \n                                        </tr>\n                                    )\n                                }          \n                            </tbody>\n                        </table>\n                       :<p>No Encontrado</p> \n                       }                       \n                    </div>                    \n                </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        userAuthenticated: state.userAuthenticated\n    }\n}\n\nexport default connect(mapStateToProps)(list)"]},"metadata":{},"sourceType":"module"}